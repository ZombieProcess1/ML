```
朴素贝叶斯算法用来进行文本分类、邮件归类实验的一般步骤
1、文本分词，需要按照空格划分单词，去掉空格、符号、长度太短单词、停用词（辅助结构词汇）、高频词
在过程中可能出现读取文本时的编码问题，所以一般用codecs.open(filename,'r',encoding='utf-8').read()
关于单词长度需要自行定义，一般按照经验以及对文本中单词的普遍观察得到

2、提取出词汇集合，并能够对每条文本用向量表示，按照词汇列表顺序，该词出现则用1表示，没有则用0表示

3、测试集、训练集随机划分，训练相应的贝叶斯分类器
针对每个训练集的样本，得出每个分类下每个元素（单词）的条件概率以及该分类的先验概率
这里需要特别注意区分的是，文本中的单词不是完全意义上的独立，所以一个单词出现的概率应该是它的频数除以该分类下所有单词出现的频数之和。而我也拿了《统计学习方法》的例4做了示范，对于相应列的属性完全独立开来的情况，条件概率的分母应该是该分类下实例的个数，而与属性个数无关。
同时训练的时候为了避免有些调降概率为零的情况，需要一开始对分子分母进行相应的初始化，并且采用对数，使得概率值变为负数，但是规律依然是概率值越大越符合分类。

4、针对需要测试的样例，进行分类
针对随机选择的测试集，计算其测试的错误率。

在整段代码中，我先是演示了《统计学习方法》中例4的实例，并也按照贝叶斯估计零值的情况，对代码做了相应修改。
接着我对文本分析、邮件分析写了一段普适的贝叶斯训练、分类代码。第一个测试实例基于邮件分类，第二个实例基于《统计学习方法》的例4。这里比较之后在计算条件概率时，分母的值并不一样。除了分母初始值是属性值个数不同，另外单词是所有单词总数，而一开始的例子是样本数。这些都造成了差异。 虽然预测分类结果一样，但是是否普适依然值得思考。个人建议还是将文本分类与其它实现按照具体情况区分开来。

```